<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="OAuth2 store module: defines types and storage for tokens, user info, and providers. OAuth2 provider, token, user info, config, and session types for authentication flows."><title>narangcia_cryptic_auth::core::oauth::store - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="narangcia_cryptic_auth" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../../../static.files/storage-4e99c027.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../narangcia_cryptic_auth/index.html">narangcia_<wbr>cryptic_<wbr>auth</a><span class="version">0.3.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module store</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#oauth2-flow-with-frontend-redirect" title="OAuth2 Flow with Frontend Redirect">OAuth2 Flow with Frontend Redirect</a><ul><li><a href="#example-configuration" title="Example Configuration">Example Configuration</a></li><li><a href="#frontend-token-extraction" title="Frontend Token Extraction">Frontend Token Extraction</a></li></ul></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In narangcia_<wbr>cryptic_<wbr>auth::<wbr>core::<wbr>oauth</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">narangcia_cryptic_auth</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">oauth</a></div><h1>Module <span>store</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/narangcia_cryptic_auth/core/oauth/store.rs.html#1-328">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>OAuth2 store module: defines types and storage for tokens, user info, and providers.
OAuth2 provider, token, user info, config, and session types for authentication flows.</p>
<p>This module defines enums and structs for representing OAuth2 providers, tokens, user information,
configuration, and session state. It also provides utility methods for working with these types.</p>
<h2 id="oauth2-flow-with-frontend-redirect"><a class="doc-anchor" href="#oauth2-flow-with-frontend-redirect">§</a>OAuth2 Flow with Frontend Redirect</h2>
<p>The OAuth2 implementation supports automatic redirection to frontend applications after successful
authentication. Here’s how the flow works:</p>
<ol>
<li><strong>Generate Auth URL</strong>: Client requests authorization URL from <code>/oauth/{provider}/auth</code></li>
<li><strong>User Authorization</strong>: User is redirected to provider (Google, GitHub, etc.) for authorization</li>
<li><strong>Provider Callback</strong>: Provider redirects back to <code>/oauth/{provider}/callback</code> with auth code</li>
<li><strong>Token Exchange</strong>: Server exchanges code for tokens automatically</li>
<li><strong>Frontend Redirect</strong>: Server redirects user to <code>redirect_frontend_uri</code> with tokens in URL fragment</li>
</ol>
<h3 id="example-configuration"><a class="doc-anchor" href="#example-configuration">§</a>Example Configuration</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>cryptic::core::oauth::store::OAuth2Config;

<span class="kw">let </span>config = OAuth2Config {
    app_name: <span class="string">"My App"</span>.to_string(),
    client_id: <span class="string">"your-client-id"</span>.to_string(),
    client_secret: <span class="string">"your-client-secret"</span>.to_string(),
    redirect_uri: <span class="string">"https://api.myapp.com/oauth/google/callback"</span>.to_string(),
    redirect_frontend_uri: <span class="string">"https://myapp.com/auth/callback"</span>.to_string(),
    additional_scopes: <span class="macro">vec!</span>[<span class="string">"profile"</span>.to_string()],
};</code></pre></div>
<h3 id="frontend-token-extraction"><a class="doc-anchor" href="#frontend-token-extraction">§</a>Frontend Token Extraction</h3>
<p>Your frontend application should handle the redirect and extract tokens from the URL fragment:</p>
<div class="example-wrap"><pre class="language-javascript"><code>// At your redirect_frontend_uri (e.g., https://myapp.com/auth/callback)
function handleOAuthCallback() {
  const fragment = window.location.hash.substring(1);
  const params = new URLSearchParams(fragment);

  if (params.has(&#39;error&#39;)) {
    console.error(&#39;OAuth error:&#39;, params.get(&#39;error&#39;));
  } else {
    const accessToken = params.get(&#39;access_token&#39;);
    const refreshToken = params.get(&#39;refresh_token&#39;);
    const userId = params.get(&#39;user_id&#39;);

    // Store tokens and proceed
    localStorage.setItem(&#39;accessToken&#39;, accessToken);
    // ... redirect to your app
  }
}</code></pre></div></div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.OAuth2Config.html" title="struct narangcia_cryptic_auth::core::oauth::store::OAuth2Config">OAuth2<wbr>Config</a></dt><dd>Configuration for OAuth2 authentication with a provider.</dd><dt><a class="struct" href="struct.OAuth2Session.html" title="struct narangcia_cryptic_auth::core::oauth::store::OAuth2Session">OAuth2<wbr>Session</a></dt><dd>Represents an OAuth2 session, including state, provider, PKCE verifier, and timing info.</dd><dt><a class="struct" href="struct.OAuth2Token.html" title="struct narangcia_cryptic_auth::core::oauth::store::OAuth2Token">OAuth2<wbr>Token</a></dt><dd>Represents an OAuth2 token, including access and refresh tokens, expiration, and provider info.</dd><dt><a class="struct" href="struct.OAuth2UserInfo.html" title="struct narangcia_cryptic_auth::core::oauth::store::OAuth2UserInfo">OAuth2<wbr>User<wbr>Info</a></dt><dd>Represents user information returned by an OAuth2 provider.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.OAuth2Provider.html" title="enum narangcia_cryptic_auth::core::oauth::store::OAuth2Provider">OAuth2<wbr>Provider</a></dt><dd>Supported OAuth2 providers for authentication.</dd></dl></section></div></main></body></html>